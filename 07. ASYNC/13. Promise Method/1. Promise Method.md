# ğŸ¯ Promise Method

> ğŸ“š **Panduan Belajar Promise Method untuk Pemula**

## ğŸ“– Apa itu Promise Method?

**Promise** adalah objek JavaScript yang merepresentasikan keberhasilan atau kegagalan dari sebuah operasi asynchronous (operasi yang membutuhkan waktu, seperti mengambil data dari server).

Promise memiliki **3 method utama** yang bisa kita gunakan:

---

## ğŸ”¹ 1. Method `then()`

### ğŸ“ Penjelasan:
- Digunakan untuk **mendapatkan atau mengubah data** ketika Promise **berhasil** (sukses)
- Method ini akan dijalankan ketika operasi asynchronous selesai dengan baik
- Kita bisa melakukan **chaining** (berantai) dengan `then()` untuk memproses data secara bertahap

### âœ¨ Contoh Penggunaan:
```javascript
getProducts()
  .then((response) => {
    console.log("Data berhasil didapat:", response);
    return JSON.parse(response); // Mengubah string JSON menjadi object
  })
  .then((json) => {
    console.log("Data setelah di-parse:", json);
    // Tampilkan data ke halaman
    document.getElementById('id').textContent = json.id;
    document.getElementById('name').textContent = json.name;
    document.getElementById('price').textContent = json.price;
  });
```

**ğŸ¯ Output:**
```
Data berhasil didapat: {"id": 1, "name": "Laptop", "price": 15000000}
Data setelah di-parse: {id: 1, name: "Laptop", price: 15000000}

Tampilan di halaman:
Id: 1
Name: Laptop
Price: 15000000
```

---

## ğŸ”¹ 2. Method `catch()`

### ğŸ“ Penjelasan:
- Digunakan untuk **mendapatkan data error** ketika Promise **gagal**
- Method ini akan dijalankan jika terjadi error dalam operasi asynchronous
- Sangat penting untuk **error handling** (menangani kesalahan)

### âœ¨ Contoh Penggunaan:
```javascript
getProducts()
  .then((response) => {
    const json = JSON.parse(response);
    console.log("Sukses:", json);
  })
  .catch((error) => {
    console.log("Terjadi error:", error);
    // Tampilkan pesan error
    document.getElementById('id').textContent = error;
    document.getElementById('name').textContent = error;
    document.getElementById('price').textContent = error;
  });
```

**ğŸ¯ Output (jika error):**
```
Terjadi error: Error get product with response : 404

Tampilan di halaman:
Id: Error get product with response : 404
Name: Error get product with response : 404
Price: Error get product with response : 404
```

---

## ğŸ”¹ 3. Method `finally()`

### ğŸ“ Penjelasan:
- Akan **selalu dieksekusi** baik Promise **sukses** maupun **gagal**
- Berguna untuk melakukan cleanup atau memberikan feedback akhir
- Biasanya digunakan untuk menyembunyikan loading, menutup koneksi, dll

### âœ¨ Contoh Penggunaan:
```javascript
getProducts()
  .then((response) => {
    console.log("Berhasil mendapat data");
  })
  .catch((error) => {
    console.log("Gagal mendapat data");
  })
  .finally(() => {
    console.log("Proses selesai, apapun hasilnya");
    // Sembunyikan loading spinner, dll
  });
```

**ğŸ¯ Output (sukses atau gagal):**
```
// Jika sukses:
Berhasil mendapat data
Proses selesai, apapun hasilnya

// Jika gagal:
Gagal mendapat data
Proses selesai, apapun hasilnya
```

---

## ğŸ’» Contoh Kode Lengkap

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promise Method</title>
  </head>
  <body>
    <h2>ğŸ“¦ Data Produk</h2>
    <table border="1" cellpadding="10">
      <tbody>
        <tr>
          <td><strong>Id :</strong></td>
          <td id="id">Loading...</td>
        </tr>

        <tr>
          <td><strong>Name :</strong></td>
          <td id="name">Loading...</td>
        </tr>

        <tr>
          <td><strong>Price :</strong></td>
          <td id="price">Loading...</td>
        </tr>
      </tbody>
    </table>

    <script>
      // Fungsi untuk mengambil data produk
      const getProducts = () => {
        return new Promise((resolve, reject) => {
          const ajax = new XMLHttpRequest();
          ajax.open('GET', 'api/product.json');

          ajax.onload = () => {
            if (ajax.status === 200) {
              // Sukses - panggil resolve()
              resolve(ajax.responseText);
            } else {
              // Gagal - panggil reject()
              reject(`Error get product with response : ${ajax.status}`);
            }
          };

          ajax.send();
        });
      };

      // â­ CARA 1: Menggunakan multiple then() (chaining)
      // getProducts()
      //   .then((response) => JSON.parse(response))
      //   .then((json) => {
      //     document.getElementById('id').textContent = json.id;
      //     document.getElementById('name').textContent = json.name;
      //     document.getElementById('price').textContent = json.price;
      //   });

      // â­ CARA 2: Menggunakan then(), catch(), dan finally()
      getProducts()
        .then((response) => {
          // âœ… Jika berhasil, parse data dan tampilkan
          const json = JSON.parse(response);

          document.getElementById('id').textContent = json.id;
          document.getElementById('name').textContent = json.name;
          document.getElementById('price').textContent = json.price;
        })
        .catch((error) => {
          // âŒ Jika gagal, tampilkan pesan error
          document.getElementById('id').textContent = error;
          document.getElementById('name').textContent = error;
          document.getElementById('price').textContent = error;
        })
        .finally(() => {
          // ğŸ Selalu dijalankan di akhir
          console.log('Finally: Proses pengambilan data selesai');
        });
    </script>
  </body>
</html>
```

---

## ğŸ“Š Penjelasan Alur Kode

### 1ï¸âƒ£ **Membuat Promise**
```javascript
const getProducts = () => {
  return new Promise((resolve, reject) => {
    // Kode asynchronous di sini
  });
};
```
- Fungsi `getProducts()` mengembalikan sebuah Promise
- Promise menerima 2 parameter: `resolve` (untuk sukses) dan `reject` (untuk gagal)

### 2ï¸âƒ£ **XMLHttpRequest**
```javascript
const ajax = new XMLHttpRequest();
ajax.open('GET', 'api/product.json');
```
- Membuat request AJAX untuk mengambil data dari file JSON
- Method `GET` digunakan untuk membaca data

### 3ï¸âƒ£ **Handle Response**
```javascript
ajax.onload = () => {
  if (ajax.status === 200) {
    resolve(ajax.responseText); // Berhasil
  } else {
    reject(`Error...`); // Gagal
  }
};
```
- Status 200 = berhasil â†’ panggil `resolve()`
- Status lain = gagal â†’ panggil `reject()`

### 4ï¸âƒ£ **Menggunakan Promise**
```javascript
getProducts()
  .then((response) => { /* handle sukses */ })
  .catch((error) => { /* handle error */ })
  .finally(() => { /* selalu dijalankan */ });
```

---

## ğŸ¯ Output Hasil Akhir

### âœ… **Jika Request Berhasil:**

**Console:**
```
Finally: Proses pengambilan data selesai
```

**Tampilan di Browser:**
```
ğŸ“¦ Data Produk
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Id :     â”‚ 1             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Name :   â”‚ Laptop        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Price :  â”‚ 15000000      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âŒ **Jika Request Gagal (misal file tidak ditemukan):**

**Console:**
```
Finally: Proses pengambilan data selesai
```

**Tampilan di Browser:**
```
ğŸ“¦ Data Produk
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Id :     â”‚ Error get product with response : 404  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Name :   â”‚ Error get product with response : 404  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Price :  â”‚ Error get product with response : 404  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Referensi Lebih Lanjut

ğŸ”— [MDN Web Docs - Promise Instance Methods](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise#instance_methods)

---

## ğŸ’¡ Tips Belajar

âœ¨ **Ingat 3 Method Utama:**
- `then()` â†’ untuk **sukses** âœ…
- `catch()` â†’ untuk **error** âŒ
- `finally()` â†’ **selalu dijalankan** ğŸ

ğŸ“ **Latihan:**
1. Coba buat Promise sederhana sendiri
2. Praktikkan chaining dengan multiple `then()`
3. Selalu gunakan `catch()` untuk menangani error
4. Gunakan `finally()` untuk cleanup

---

**Selamat Belajar! ğŸš€**
