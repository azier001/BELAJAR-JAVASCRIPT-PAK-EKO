# ğŸ“¡ Menerima Data di AJAX

## ğŸ¯ Pengenalan

**AJAX (Asynchronous JavaScript and XML)** adalah teknologi yang memungkinkan kita untuk berkomunikasi dengan server secara asinkron tanpa perlu me-refresh halaman web.

---

## ğŸ”„ Cara Kerja AJAX

### ğŸ“¤ Mengirim dan Menerima Data

- **AJAX biasanya digunakan untuk mengirim data ke Server atau menerima data dari Server**
  
  AJAX memungkinkan aplikasi web untuk mengirim request ke server dan menerima response tanpa mengganggu pengalaman pengguna. Misalnya, ketika Anda mengisi form atau memuat konten baru tanpa reload halaman.

---

### ğŸ“¨ Response dari Server

- **Tiap request AJAX yang dilakukan, biasanya kita ingin mendapat informasi response yang diberikan oleh Server**
  
  Setiap kali kita mengirim request AJAX (GET, POST, PUT, DELETE), server akan memberikan response berupa data yang kita butuhkan. Data ini bisa berupa JSON, XML, HTML, atau plain text.

---

### â³ Sifat Asynchronous

- **Kita tidak bisa langsung mengambil response AJAX, karena proses AJAX adalah Async, sehingga kita perlu menunggu sampai proses Async nya selesai**
  
  **Async** berarti kode JavaScript tidak akan menunggu response dari server sebelum melanjutkan ke baris kode berikutnya. Oleh karena itu, kita perlu menggunakan callback atau promise untuk menangani response ketika sudah siap.

---

## ğŸ”” AJAX Callback

### ğŸ’¡ Menggunakan Callback

- **Untuk mendapatkan informasi AJAX, kita bisa menggunakan AJAX Callback, yang akan dieksekusi setelah proses AJAX selesai**
  
  Callback adalah function yang akan dipanggil secara otomatis ketika proses AJAX selesai. Dengan callback, kita bisa memproses data yang diterima dari server.

---

### ğŸª Event Load

- **Untuk menambahkan AJAX Callback, kita bisa tambahkan pada event load**
  
  Event `load` akan dipicu ketika request AJAX berhasil diselesaikan dan response sudah diterima sepenuhnya dari server.

- ğŸ“š **Referensi:** [MDN - XMLHttpRequest load event](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/load_event)

---

### ğŸ“„ Mengambil Data Response

- **Dan untuk mengambil datanya dari server, kita bisa menggunakan property `responseText`**
  
  Property `responseText` berisi data response dari server dalam format string. Jika server mengirim JSON, kita perlu menggunakan `JSON.parse()` untuk mengubahnya menjadi object JavaScript.

---

## ğŸ’» Kode Lengkap: Menerima Data di AJAX

### ğŸ”§ Setup XMLHttpRequest

```javascript
// Membuat object XMLHttpRequest
const ajax = new XMLHttpRequest();

// Konfigurasi request - GET ke file JSON
ajax.open("GET", "api/hello.json", true);
```

**Penjelasan:**
- `new XMLHttpRequest()` - Membuat instance baru dari XMLHttpRequest
- `ajax.open("GET", "api/hello.json", true)` - Konfigurasi request dengan method GET ke file hello.json, parameter `true` berarti asynchronous

---

### ğŸ¯ Menambahkan Event Listener

```javascript
// Cara 1: Menggunakan addEventListener (Recommended)
ajax.addEventListener("load", function () {
    // Parse response JSON dari server
    const json = JSON.parse(ajax.responseText);
    
    // Ambil element dengan id "response"
    const response = document.getElementById("response");
    
    // Set text content dengan data dari server
    response.textContent = json.response;
    
    // Append element ke body
    document.body.appendChild(response);
});

// Cara 2: Menggunakan onload property
// ajax.onload = function() {
//     const json = JSON.parse(ajax.responseText);
//     console.log(json);
// };
```

**Penjelasan:**
- `addEventListener("load", ...)` - Menambahkan callback yang akan dijalankan ketika response berhasil diterima
- `JSON.parse(ajax.responseText)` - Mengubah string JSON menjadi object JavaScript
- `document.getElementById("response")` - Mengambil element HTML dengan id "response"
- `response.textContent` - Mengisi konten text element dengan data dari server
- `document.body.appendChild(response)` - Menambahkan element ke dalam body HTML

---

### ğŸš€ Mengirim Request

```javascript
// Mengirim request ke server
ajax.send();
```

**Penjelasan:**
- `ajax.send()` - Mengirim request yang sudah dikonfigurasi ke server

---

## ğŸ“ Contoh Kode Lengkap

### ğŸ“„ File: index.html

```html
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX - Menerima Data dari Server</title>
</head>
<body>
    <h1>Menerima Data di AJAX</h1>
    <button onclick="loadData()">Load Data</button>
    <div id="response"></div>

    <script>
        function loadData() {
            // Membuat XMLHttpRequest object
            const ajax = new XMLHttpRequest();

            // Konfigurasi request - GET ke file JSON
            ajax.open("GET", "api/hello.json", true);

            // Menambahkan event listener untuk menerima response
            ajax.addEventListener("load", function () {
                // Parse JSON response
                const json = JSON.parse(ajax.responseText);
                
                // Ambil element untuk menampilkan response
                const response = document.getElementById("response");
                
                // Set konten dengan data dari server
                response.textContent = json.response;
                
                // Append element ke body
                document.body.appendChild(response);
            });

            // Kirim request ke server
            ajax.send();
        }
    </script>
</body>
</html>
```

**Penjelasan HTML:**
- ğŸ”˜ **Button** - Trigger untuk memanggil function `loadData()`
- ğŸ“¦ **Div #response** - Element untuk menampilkan data dari file JSON
- ğŸ¯ **JavaScript Function** - Function `loadData()` yang menangani AJAX request

---

### ğŸ“„ File: api/hello.json

```json
{
  "response": "Hello ahmad"
}
```

**Penjelasan JSON:**
- ğŸ“ File JSON sederhana yang berisi satu property `response`
- ğŸ’¬ Value `"Hello ahmad"` akan ditampilkan di halaman web

---

### ğŸ–¥ï¸ Output di Browser

**Sebelum klik button:**
```
Menerima Data di AJAX
[Load Data]
```

**Setelah klik button "Load Data":**
```
Menerima Data di AJAX
[Load Data]
Hello ahmad
```

---

### ğŸ“± JavaScript Lengkap (Standalone)

```javascript
// Membuat XMLHttpRequest object
const ajax = new XMLHttpRequest();

// Konfigurasi request - GET ke file JSON
ajax.open("GET", "api/hello.json", true);

// Menambahkan event listener untuk menerima response
ajax.addEventListener("load", function () {
    // Parse JSON response
    const json = JSON.parse(ajax.responseText);
    
    // Ambil atau buat element untuk menampilkan response
    const response = document.getElementById("response");
    
    // Set konten dengan data dari file JSON
    response.textContent = json.response;
    
    // Tampilkan response
    document.body.appendChild(response);
});

// Kirim request
ajax.send();
```

---

## âš¡ Tips & Best Practices

- âœ… **Selalu gunakan `addEventListener`** dibanding `onload` untuk lebih flexible
- âœ… **Gunakan `try-catch`** saat parsing JSON untuk handle error
- âœ… **Tambahkan error handling** dengan event `error` dan `timeout`
- âœ… **Validasi response** sebelum digunakan

---

## ğŸ” Error Handling (Bonus)

```javascript
// Menambahkan error handling
ajax.addEventListener("error", function() {
    console.error("âŒ Request gagal!");
});

ajax.addEventListener("timeout", function() {
    console.error("â±ï¸ Request timeout!");
});

// Set timeout 5 detik
ajax.timeout = 5000;
```

---

## ğŸ“š Kesimpulan

- ğŸ¯ AJAX memungkinkan komunikasi asynchronous dengan server
- ğŸ”„ Response tidak bisa diambil langsung karena sifat async
- ğŸ”” Gunakan callback dengan event `load` untuk handle response
- ğŸ“„ Property `responseText` berisi data dari server
- âš¡ Selalu tambahkan error handling untuk aplikasi yang robust

---

**ğŸ“Œ Catatan:** Dokumentasi ini menggunakan XMLHttpRequest. Untuk approach modern, pertimbangkan menggunakan `fetch()` API atau library seperti Axios.
