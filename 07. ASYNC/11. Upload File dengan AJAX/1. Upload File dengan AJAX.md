# ğŸ“¤ Upload File dengan AJAX

## ğŸ¯ Apa itu Upload File dengan AJAX?

Ketika kita membuat website, kadang kita perlu mengirim file dari komputer pengguna ke server. Misalnya:
- ğŸ“¸ Upload foto profil
- ğŸ“„ Upload dokumen
- ğŸµ Upload file musik

Biasanya kita mengirim data teks seperti nama atau email. Tapi untuk mengirim **file**, caranya sedikit berbeda!

---

## ğŸ“š Konsep Dasar

### Apa Bedanya dengan Mengirim Data Biasa?

- âœ… **Data Biasa** (JSON, Form): Mengirim teks seperti nama, email, password
- âœ… **File**: Mengirim gambar, PDF, video, dll (ukuran lebih besar)

### Tools yang Dibutuhkan

Untuk upload file, kita butuh 3 hal penting:

1. **ğŸ“¦ FormData** - Wadah untuk menyimpan data form DAN file
2. **ğŸ“ File Object** - Representasi file yang dipilih user
3. **ğŸŒ XMLHttpRequest/Fetch** - Untuk mengirim data ke server

---

## ğŸ”§ Cara Kerja Upload File

```
User Pilih File â†’ Ambil File Object â†’ Masukkan ke FormData â†’ Kirim ke Server
```

### Step by Step:

1. **User memilih file** dari komputer via `<input type="file">`
2. **JavaScript mengambil file** dari input tersebut
3. **File dimasukkan ke FormData** bersama data lainnya
4. **Kirim FormData** ke server menggunakan AJAX

---

## ğŸ’» Contoh Kode Lengkap

Kita akan membuat form registrasi yang bisa upload foto profil!

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajax Send File</title>
</head>
<body>
  <h1>Register</h1>

  <form>
    <label for="username">
      Username:
      <input type="text" id="username" name="username">
    </label>
    <br>

    <label for="name">
      Name:
      <input type="text" name="name" id="name">
    </label>
    <br>

    <label for="profile">
      Profile:
      <input type="file" name="profile" id="profile">
    </label>
    <br>

    <input type="button" value="Register" id="register">
  </form>

  <h1 id="response"></h1>

  <script>
    const registerBtn = document.querySelector('#register');

    const doRegister = () => {
      const responseElement = document.querySelector('#response');

      const ajax = new XMLHttpRequest();
      ajax.open('POST', 'https://jsonplaceholder.typicode.com/posts');

      ajax.addEventListener('load', () => {
        responseElement.textContent = ajax.responseText;
      });

      const form = new FormData();
      form.append('username', document.getElementById('username').value);
      form.append('name', document.getElementById('name').value);

      const files = document.getElementById('profile').files;
      const firstFile = files[0];

      form.append('profile', firstFile);

      ajax.send(form);
    };

    registerBtn.addEventListener('click', doRegister);
  </script>
</body>
</html>
```

---

## ğŸ” Penjelasan Kode Per Bagian

### 1ï¸âƒ£ **HTML Form**

```html
<input type="file" name="profile" id="profile">
```

- ğŸ“Œ `type="file"` â†’ Membuat tombol untuk pilih file
- ğŸ“Œ Saat diklik, akan muncul file explorer
- ğŸ“Œ User bisa pilih file dari komputer

---

### 2ï¸âƒ£ **Event Listener**

```javascript
const registerBtn = document.querySelector('#register');
registerBtn.addEventListener('click', doRegister);
```

**Penjelasan:**
- ğŸ¯ Ambil tombol dengan id `register`
- ğŸ¯ Ketika tombol diklik, jalankan fungsi `doRegister()`

---

### 3ï¸âƒ£ **Membuat XMLHttpRequest**

```javascript
const ajax = new XMLHttpRequest();
ajax.open('POST', 'https://jsonplaceholder.typicode.com/posts');
```

**Penjelasan:**
- ğŸŒ Membuat objek AJAX baru
- ğŸŒ Siapkan koneksi ke server dengan method **POST**
- ğŸŒ URL tujuan: `https://jsonplaceholder.typicode.com/posts`

---

### 4ï¸âƒ£ **Menangani Response dari Server**

```javascript
ajax.addEventListener('load', () => {
  responseElement.textContent = ajax.responseText;
});
```

**Penjelasan:**
- âœ… Tunggu sampai server kirim balasan
- âœ… Ketika balasan diterima, tampilkan di elemen `<h1 id="response">`
- âœ… `ajax.responseText` berisi data yang dikirim server

---

### 5ï¸âƒ£ **Membuat FormData (PENTING! ğŸ”¥)**

```javascript
const form = new FormData();
form.append('username', document.getElementById('username').value);
form.append('name', document.getElementById('name').value);
```

**Penjelasan:**
- ğŸ“¦ `new FormData()` â†’ Membuat wadah kosong
- ğŸ“¦ `.append('key', value)` â†’ Menambahkan data ke wadah
- ğŸ“¦ Kita masukkan **username** dan **name** dulu

---

### 6ï¸âƒ£ **Mengambil File yang Dipilih User** â­

```javascript
const files = document.getElementById('profile').files;
const firstFile = files[0];
```

**Penjelasan:**
- ğŸ“ `.files` â†’ Mengambil SEMUA file yang dipilih (bisa lebih dari 1)
- ğŸ“ `.files[0]` â†’ Ambil file PERTAMA (index 0)
- ğŸ“ `firstFile` sekarang berisi objek File

**ğŸ’¡ Info Tambahan:**
- Jika user pilih 3 file â†’ `files.length` akan bernilai 3
- `files[0]` = file pertama
- `files[1]` = file kedua
- `files[2]` = file ketiga

---

### 7ï¸âƒ£ **Menambahkan File ke FormData** ğŸ¯

```javascript
form.append('profile', firstFile);
```

**Penjelasan:**
- ğŸ“¦ Masukkan file ke dalam FormData dengan key `'profile'`
- ğŸ“¦ Sekarang FormData berisi: username, name, DAN file profile

---

### 8ï¸âƒ£ **Mengirim Data ke Server** ğŸš€

```javascript
ajax.send(form);
```

**Penjelasan:**
- ğŸš€ Kirim FormData ke server
- ğŸš€ Server akan terima: username, name, dan file profile
- ğŸš€ Tunggu response dari server

---

## ğŸ“Š Output yang Dihasilkan

### Saat Form Diisi:

```
Username: johndoe
Name: John Doe
Profile: foto.jpg (file dipilih dari komputer)
```

### Yang Dikirim ke Server:

```
FormData {
  username: "johndoe",
  name: "John Doe",
  profile: File Object (foto.jpg)
}
```

### Response dari Server (JSONPlaceholder):

```json
{
  "id": 101
}
```

**âš ï¸ Catatan Penting tentang JSONPlaceholder:**
- JSONPlaceholder adalah **mock API** (API palsu untuk testing)
- API ini **TIDAK** benar-benar menyimpan data yang kita kirim
- API ini **HANYA** mengembalikan `{ "id": 101 }` sebagai konfirmasi
- Data `username`, `name`, dan `profile` yang kita kirim **tidak dikembalikan**
- File yang diupload **TIDAK** tersimpan di server

### Yang Ditampilkan di Browser:

Di `<h1 id="response"></h1>` akan muncul:
```
{"id":101}
```

---

## ğŸ” Cara Melihat Data yang Dikirim

Untuk melihat data yang benar-benar dikirim ke server:

1. **Buka Browser Developer Tools** (F12)
2. **Pilih tab Network**
3. **Klik tombol Register**
4. **Klik request ke `jsonplaceholder.typicode.com/posts`**
5. **Lihat tab Payload/Request** untuk melihat:
   - username: johndoe
   - name: John Doe
   - profile: foto.jpg (File Object)

---

## ğŸ“– Dokumentasi Referensi

Untuk belajar lebih lanjut, kamu bisa baca dokumentasi resmi:

- ğŸ“¦ **FormData**: https://developer.mozilla.org/en-US/docs/Web/API/FormData
- ğŸ“ **File**: https://developer.mozilla.org/en-US/docs/Web/API/File
- ğŸ“‹ **FileList**: https://developer.mozilla.org/en-US/docs/Web/API/FileList
- ğŸ“ **Input File**: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file

---

## âš ï¸ Hal Penting yang Perlu Diingat

### âœ… DO (Lakukan):
- Gunakan `FormData` untuk mengirim file
- Gunakan `type="file"` di input HTML
- Ambil file dari `.files[0]`
- Cek Browser Console (Network tab) untuk debug

### âŒ DON'T (Jangan):
- âŒ Jangan kirim file dengan JSON biasa (tidak akan berfungsi)
- âŒ Jangan lupa ambil file dari `.files` property
- âŒ Jangan langsung kirim tanpa FormData
- âŒ Jangan berharap JSONPlaceholder menyimpan file (ini mock API!)

---

## ğŸ“ Rangkuman

1. **Input File** â†’ User pilih file dari komputer
2. **Ambil File** â†’ Gunakan `.files[0]` untuk ambil file pertama
3. **Buat FormData** â†’ Wadah untuk data form + file
4. **Append Data** â†’ Masukkan username, name, dan file
5. **Send** â†’ Kirim ke server dengan `ajax.send(form)`
6. **Response** â†’ Tampilkan balasan dari server (untuk JSONPlaceholder: hanya `{"id":101}`)

---

## ğŸš€ Tips untuk Pemula

- ğŸ’¡ Mulai dengan upload 1 file dulu, baru nanti coba multiple files
- ğŸ’¡ Cek `console.log(firstFile)` untuk lihat isi file object
- ğŸ’¡ Test dengan file kecil dulu (kurang dari 1MB)
- ğŸ’¡ Pastikan server kamu support file upload!
- ğŸ’¡ Gunakan Browser Network tab untuk debug request/response
- ğŸ’¡ JSONPlaceholder hanya untuk testing - gunakan backend real untuk production

---

## ğŸ”„ Perbedaan Mock API vs Real API

### Mock API (JSONPlaceholder):
```json
Response: { "id": 101 }
```
- âœ… Bagus untuk belajar dan testing
- âŒ Tidak menyimpan data
- âŒ Tidak mengembalikan data yang dikirim

### Real API (Server Sungguhan):
```json
Response: {
  "id": 101,
  "username": "johndoe",
  "name": "John Doe",
  "profile_url": "https://server.com/uploads/foto.jpg",
  "message": "User registered successfully"
}
```
- âœ… Menyimpan data ke database
- âœ… Menyimpan file ke storage
- âœ… Mengembalikan konfirmasi lengkap

---

**ğŸ‰ Selamat! Kamu sudah belajar cara upload file dengan AJAX!**
