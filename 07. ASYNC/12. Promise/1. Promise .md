# ğŸ¯ JavaScript Promise - Panduan Lengkap untuk Pemula

## ğŸ“– Apa itu Promise?

**Promise** adalah salah satu fitur penting dalam JavaScript yang membantu kita menangani operasi asynchronous dengan lebih mudah dan rapi! ğŸš€

### âœ¨ Karakteristik Promise:

- ğŸ”® **Proxy untuk Nilai di Masa Depan** - Promise merupakan proxy untuk sebuah nilai di masa depan (Future) yang belum diketahui saat pembuatan Promise tersebut.

- âš¡ **Untuk Operasi Async** - Biasa Promise digunakan sebagai proxy untuk proses Async (seperti mengambil data dari server, membaca file, dll).

- ğŸ¨ **Mirip Kode Synchronous** - Penggunaan Promise sangat mudah, dan lebih mirip dengan kode Synchronous (kode yang berjalan berurutan).

- ğŸ“š **Dokumentasi Resmi** - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise

---

## ğŸ˜± Masalah dengan Callback

Sebelum ada Promise, kita menggunakan **Callback** untuk menangani operasi asynchronous. Namun, ini sering menyebabkan masalah yang disebut **"Callback Hell"** ğŸ‘¹

### ğŸ”´ Contoh Callback Hell:

```javascript
doFirst(data, param2: function (){
    doSecond(data, param2: function (){
        doThird(data, param2: function (){
            // Callback Hell - Kode semakin menjorok ke kanan!
        })
    });
});
```

### âŒ Masalah Callback Hell:

- Kode menjadi sulit dibaca
- Sulit untuk di-maintain (dipelihara)
- Indentasi terlalu dalam (pyramid of doom)
- Sulit melakukan error handling

**Promise hadir untuk menyelesaikan masalah ini!** âœ…

---

## ğŸ­ Promise State (Status Promise)

Setiap Promise memiliki **3 status** yang berbeda:

| ğŸ·ï¸ State | ğŸ”„ pending | âœ… fulfilled | âŒ rejected |
|----------|-----------|-------------|-------------|
| ğŸ“¦ Result | `undefined` | `value` | `error` |

### ğŸ“ Penjelasan Setiap State:

1. **â³ Pending (Menunggu)**
   - Status awal ketika Promise dibuat
   - Promise sedang dalam proses
   - Result masih `undefined`

2. **âœ… Fulfilled (Berhasil)**
   - Promise berhasil diselesaikan
   - Operasi async berhasil
   - Result berisi `value` (nilai yang dikembalikan)

3. **âŒ Rejected (Gagal)**
   - Promise gagal diselesaikan
   - Terjadi error dalam operasi async
   - Result berisi `error` (pesan error)

---

## ğŸ› ï¸ Kode : Membuat Promise

Untuk membuat Promise, kita menggunakan constructor `new Promise()` dengan executor function:

### ğŸ“Œ Syntax Dasar:

```javascript
const promise = new Promise( executor: function (resolve, reject) {
    if(success){
        resolve(value)
    }else{
        reject(error)
    }
});
```

### ğŸ” Penjelasan Kode:

- `new Promise()` â†’ Membuat Promise baru
- `executor` â†’ Function yang dijalankan segera saat Promise dibuat
- `resolve` â†’ Function untuk menandai Promise berhasil (fulfilled)
- `reject` â†’ Function untuk menandai Promise gagal (rejected)
- `value` â†’ Nilai yang dikembalikan saat berhasil
- `error` â†’ Pesan error yang dikembalikan saat gagal

---

## ğŸ¯ Contoh Sederhana Promise

Mari kita buat contoh sederhana untuk memahami Promise lebih baik!

### ğŸ“ Contoh: Promise Sederhana dengan Kondisi

```javascript
// Membuat Promise sederhana
const myPromise = new Promise((resolve, reject) => {
    const success = true; // Ubah ke false untuk melihat reject
    
    if(success){
        resolve("Operasi berhasil! âœ…");
    }else{
        reject("Operasi gagal! âŒ");
    }
});

console.log(myPromise);
```

### ğŸ” Penjelasan Kode:

1. **Membuat Promise** - Kita membuat Promise baru dengan `new Promise()`
2. **Executor Function** - Function dengan parameter `resolve` dan `reject`
3. **Kondisi `success`** - Variable untuk menentukan berhasil atau gagal
4. **Panggil `resolve()`** - Jika `success = true`, Promise berhasil
5. **Panggil `reject()`** - Jika `success = false`, Promise gagal
6. **Log ke Console** - Melihat status Promise

### ğŸ“¤ Output:

**Ketika `success = true`:**
```javascript
Promise {<fulfilled>: "Operasi berhasil! âœ…"}
  [[PromiseState]]: "fulfilled"
  [[PromiseResult]]: "Operasi berhasil! âœ…"
```

**Ketika `success = false`:**
```javascript
Promise {<rejected>: "Operasi gagal! âŒ"}
  [[PromiseState]]: "rejected"
  [[PromiseResult]]: "Operasi gagal! âŒ"
```

---

## ğŸ’» Contoh Implementasi Promise dengan AJAX

Sekarang mari kita lihat contoh nyata menggunakan Promise untuk mengambil data dari API!

### ğŸ“ File: `api/product.json`

```json
{
  "id": "1234",
  "name": "Iphone",
  "price": 30000000
}
```

### ğŸ“„ File: `index.html`

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promise</title>
  </head>
  <body>
    <script>
      const promise = new Promise((resolve, reject) => {
        const ajax = new XMLHttpRequest();
        ajax.open('GET', 'api/product.json');

        ajax.onload = () => {
          if (ajax.status === 200) {
            resolve(ajax.responseText);
          } else {
            reject(`Error get product with response : ${ajax.responseText}`);
          }
        };

        ajax.send();
      });

      console.log(promise);
    </script>
  </body>
</html>
```

### ğŸ” Penjelasan Kode Detail:

1. **ğŸ“¦ Membuat Promise untuk GET Request**
   ```javascript
   const promise = new Promise((resolve, reject) => { ... })
   ```
   - Variable `promise` menyimpan Promise yang akan mengambil data product

2. **ğŸ“¡ Setup XMLHttpRequest**
   ```javascript
   const ajax = new XMLHttpRequest();
   ajax.open('GET', 'api/product.json');
   ```
   - Membuat object `XMLHttpRequest` untuk melakukan HTTP request
   - Method `open()` mengkonfigurasi GET request ke file `api/product.json`

3. **ğŸª Handle Response**
   ```javascript
   ajax.onload = () => {
     if (ajax.status === 200) {
       resolve(ajax.responseText);  // âœ… Sukses
     } else {
       reject(`Error get product with response : ${ajax.responseText}`);  // âŒ Gagal
     }
   };
   ```
   - `onload` â†’ Event yang dipanggil ketika request selesai
   - `ajax.status === 200` â†’ Cek apakah request berhasil (status code 200 = OK)
   - `resolve()` â†’ Dipanggil jika berhasil, mengirim response text (data JSON)
   - `reject()` â†’ Dipanggil jika gagal, mengirim pesan error

4. **ğŸš€ Kirim Request**
   ```javascript
   ajax.send();
   ```
   - Mengirim request ke server untuk mengambil file `api/product.json`

5. **ğŸ“Š Log Promise**
   ```javascript
   console.log(promise);
   ```
   - Menampilkan status Promise di console browser

### ğŸ“¤ Output yang Mungkin Muncul:

**Scenario 1 - File Ditemukan (Sukses - Status 200):**
```javascript
Promise {<pending>}
  [[PromiseState]]: "pending"
  [[PromiseResult]]: undefined

// Setelah request selesai:
Promise {<fulfilled>: '{"id":"1234","name":"Iphone","price":30000000}'}
  [[PromiseState]]: "fulfilled"
  [[PromiseResult]]: '{"id":"1234","name":"Iphone","price":30000000}'
```
âœ… Promise berhasil dan menghasilkan data JSON dari file `product.json`

**Scenario 2 - File Tidak Ditemukan (Gagal - Status 404):**
```javascript
Promise {<pending>}
  [[PromiseState]]: "pending"
  [[PromiseResult]]: undefined

// Setelah request selesai:
Promise {<rejected>: "Error get product with response : Not Found"}
  [[PromiseState]]: "rejected"
  [[PromiseResult]]: "Error get product with response : Not Found"
```
âŒ Promise gagal karena file tidak ditemukan (404 error)

**Scenario 3 - Sedang Loading:**
```javascript
Promise {<pending>}
  [[PromiseState]]: "pending"
  [[PromiseResult]]: undefined
```
â³ Promise masih dalam status pending (sedang menunggu response dari server)

---

## ğŸ’¡ Tips untuk Pemula

- âœ… Promise membuat kode async lebih mudah dibaca dibanding callback
- âœ… Gunakan `resolve()` untuk menandai operasi sukses
- âœ… Gunakan `reject()` untuk menandai operasi gagal
- âœ… Promise selalu dimulai dengan status `pending`
- âœ… Promise hanya bisa berubah status **sekali saja** (fulfilled ATAU rejected)
- âœ… Setelah Promise selesai, statusnya **tidak bisa berubah lagi**
- âœ… `console.log(promise)` akan menampilkan status dan result dari Promise

---

## ğŸ“ Rangkuman

| Konsep | Penjelasan | Emoji |
|--------|-----------|-------|
| Promise | Object untuk menangani operasi async | ğŸ¯ |
| Pending | Status awal, sedang proses | â³ |
| Fulfilled | Berhasil, punya nilai | âœ… |
| Rejected | Gagal, punya error | âŒ |
| resolve() | Function untuk menandai sukses | ğŸ”§ |
| reject() | Function untuk menandai gagal | ğŸš« |
| Executor | Function yang dijalankan saat Promise dibuat | âš™ï¸ |

**Selamat belajar JavaScript Promise!** ğŸ‰
