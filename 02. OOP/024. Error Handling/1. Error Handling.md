# Error Handling

- Saat terjadi error di kode program JavaScript, kadang kita tidak ingin program kita berhenti
- Di JavaScript, kita bisa menangkap jika terjadi error
- Kita bisa menggunakan try catch statement untuk menangkap error
- Pada block try, kita akan mencoba mengakses kode program yang bisa menyebabkan error, dan jika terjadi error, block try akan berhenti dan otomatis masuk ke block catch
- Jika tidak terjadi error, block catch tidak akan dieksekusi

## Kode: Error Handling

### Contoh 1: Tanpa Error Handling

Pada contoh ini, ketika terjadi error, program akan langsung berhenti dan kode di bawahnya tidak akan dieksekusi.

```javascript
// Kode awal: Class MathUtil dengan throw error
class MathUtil {
    static sum(...numbers) {
        if (numbers.length === 0) {
            throw new Error("Total parameter harus lebih dari 0");
        }
        
        let result = 0;
        for (const number of numbers) {
            result += number;
        }
        return result;
    }
}

console.info(MathUtil.sum()); // Ini akan error karena tidak ada parameter
console.info(MathUtil.sum(1, 1, 1, 1, 1)); // Baris ini tidak akan dijalankan
```

**Penjelasan:**
- Method `sum()` menerima parameter rest (`...numbers`) yang menampung semua argumen dalam bentuk array
- Jika tidak ada parameter yang dikirim (`numbers.length === 0`), maka akan melempar error
- Ketika `MathUtil.sum()` dipanggil tanpa parameter, error akan terjadi
- Baris `console.info(MathUtil.sum(1, 1, 1, 1, 1))` tidak akan pernah dijalankan karena program sudah berhenti

**Output:**
```
Error: Total parameter harus lebih dari 0
    at Function.sum (...)
(Program berhenti di sini, baris berikutnya tidak dijalankan)
```

---

### Contoh 2: Dengan Error Handling

Pada contoh ini, error akan ditangkap oleh block `catch`, sehingga program tetap bisa melanjutkan eksekusi kode di bawahnya.

```javascript
// Dengan Error Handling
class MathUtil {
    static sum(...numbers) {
        if (numbers.length === 0) {
            throw new Error("Total parameter harus lebih dari 0");
        }
        
        let result = 0;
        for (const number of numbers) {
            result += number;
        }
        return result;
    }
}

try {
    console.info(MathUtil.sum()); // Error akan terjadi di sini
    console.info("Kode Block Try Akan Berhenti"); // Baris ini tidak dijalankan
} catch (error) {
    console.error(`Terjadi error : ${error.message}`); // Error ditangkap di sini
}

console.info("Kode Program Tidak Akan Berhenti"); // Baris ini tetap dijalankan
```

**Penjelasan:**
- Block `try` mencoba menjalankan `MathUtil.sum()` tanpa parameter
- Ketika error terjadi, eksekusi di block `try` langsung berhenti
- Program tidak crash, melainkan langsung masuk ke block `catch`
- Di block `catch`, kita bisa mengakses objek `error` dan menampilkan pesannya
- Setelah block `catch` selesai, program melanjutkan eksekusi kode normal di bawahnya
- Ini menunjukkan bahwa program tidak berhenti meskipun terjadi error

**Output:**
```
Terjadi error : Total parameter harus lebih dari 0
Kode Program Tidak Akan Berhenti
```

---

## Kata Kunci finally

- Kadang kita ingin melakukan sesuatu entah itu terjadi error ataupun tidak
- Dalam try catch, kita bisa menambahkan block finally
- Block finally ini akan selalu dieksekusi setelah try catch selesai, entah terjadi error atau tidak, block finally akan selalu dieksekusi

### Kode: Kata Kunci finally

```javascript
class MathUtil {
    static sum(...numbers) {
        if (numbers.length === 0) {
            throw new Error("Total parameter harus lebih dari 0");
        }
        
        let result = 0;
        for (const number of numbers) {
            result += number;
        }
        return result;
    }
}

try {
    console.info(MathUtil.sum());
    console.info("Kode Block Try Akan Berhenti");
} catch (error) {
    console.error(`Terjadi error : ${error.message}`);
} finally {
    console.info("Kode Program Selesai");
}
```

**Penjelasan:**
- Block `finally` ditambahkan setelah block `catch`
- Kode di dalam block `finally` akan selalu dieksekusi, baik terjadi error maupun tidak
- Dalam contoh ini, meskipun terjadi error dan masuk ke block `catch`, block `finally` tetap dijalankan
- Block `finally` berguna untuk membersihkan resource, menutup koneksi database, atau melakukan cleanup lainnya yang harus dilakukan dalam kondisi apapun

**Output:**
```
Terjadi error : Total parameter harus lebih dari 0
Kode Program Selesai
```

---

## Try Finally

- Kata kunci finally juga bisa digunakan tanpa perlu menggunakan catch
- Biasanya ini digunakan dalam kasus tertentu

### Kode: Try Finally

```javascript
class Counter {
    constructor() {
        this.value = 1;
    }
    
    next() {
        try {
            return this.value;
        } finally {
            this.value++;
        }
    }
}

const counter = new Counter();
console.info(counter.next());
console.info(counter.next());
console.info(counter.next());
console.info(counter.next());
console.info(counter.next());
```

**Penjelasan:**
- Class `Counter` memiliki property `value` yang dimulai dari 1
- Method `next()` menggunakan try-finally tanpa catch
- Di dalam block `try`, method mengembalikan nilai `this.value` saat ini
- Block `finally` akan selalu dieksekusi setelah return, dan menambahkan nilai `this.value` dengan 1
- Meskipun ada statement `return` di block `try`, block `finally` tetap dijalankan sebelum method benar-benar mengembalikan nilai
- Ini memastikan bahwa setiap kali method `next()` dipanggil, nilai counter akan selalu bertambah, bahkan setelah nilai dikembalikan
- Penggunaan try-finally tanpa catch berguna ketika kita ingin memastikan kode tertentu selalu dijalankan, tapi tidak perlu menangani error

**Output:**
```
1
2
3
4
5
```
