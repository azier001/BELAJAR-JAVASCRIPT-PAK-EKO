# ðŸŽ¯ Closure dalam JavaScript

## ðŸ“– Apa itu Closure?

**Closure** adalah kombinasi dari sebuah **function** dan **bundel referensi** ke data di sekitarnya (lexical environment). 

Dengan kata sederhana: **Closure memungkinkan sebuah function "mengingat" dan mengakses variable dari tempat function tersebut dibuat, bahkan setelah function tersebut dipanggil di tempat lain.**

---

## ðŸ¤” Mengapa Closure Penting?

Sebelum memahami closure, kita perlu tahu:
- âœ… **Local scope** = Variable di dalam function hanya bisa diakses di dalam function itu
- âŒ **Variable local** tidak bisa diakses dari luar function

**Tapi dengan Closure:**
- âœ¨ Kita bisa membuat function yang tetap "terhubung" dengan data di scope asalnya
- ðŸ” Kita bisa membuat data yang "private" dan terlindungi

---

## ðŸ“ Contoh 1: Dasar Closure

### Kode:
```javascript
function buatSalam(nama) {
    // Variable 'nama' ada di outer scope
    
    function tampilkanSalam() {
        // Function ini bisa akses 'nama' dari outer scope
        console.log("Halo, " + nama + "!");
    }
    
    return tampilkanSalam;
}

const salamBudi = buatSalam("Budi");
const salamSiti = buatSalam("Siti");

salamBudi(); // Memanggil function yang "mengingat" nama "Budi"
salamSiti(); // Memanggil function yang "mengingat" nama "Siti"
```

### ðŸ’¡ Penjelasan:
1. **`buatSalam("Budi")`** â†’ Membuat closure yang mengingat `nama = "Budi"`
2. **`salamBudi`** â†’ Adalah function yang sudah "terikat" dengan nilai "Budi"
3. **Meski `buatSalam` sudah selesai**, `salamBudi` masih bisa akses variable `nama`
4. **Setiap closure independen** â†’ `salamBudi` dan `salamSiti` punya "ingatan" sendiri

### ðŸ“¤ Output:
```
Halo, Budi!
Halo, Siti!
```

---

## ðŸ“ Contoh 2: Closure dengan Operasi Matematika

### Kode:
```javascript
function luarFunction(x) {
    // Variable di outer scope
    
    function dalamFunction(y) {
        // Function dalam dapat mengakses variable dari outer scope
        return x + y;
    }
    
    return dalamFunction;
}

const tambahLima = luarFunction(5);
const tambahSepuluh = luarFunction(10);

console.log(tambahLima(3));     // 5 + 3
console.log(tambahLima(7));     // 5 + 7
console.log(tambahSepuluh(3));  // 10 + 3
```

### ðŸ’¡ Penjelasan:
1. **`luarFunction(5)`** â†’ Membuat closure dengan `x = 5`
2. **`tambahLima`** â†’ Sekarang adalah function yang selalu menambahkan 5
3. **`tambahLima(3)`** â†’ Menjalankan `5 + 3 = 8`
4. **Nilai `x` tersimpan** dalam closure dan tidak berubah

### ðŸ“¤ Output:
```
8
12
13
```

---

## ðŸ“ Contoh 3: Counter Sederhana

### Kode:
```javascript
function buatCounter() {
    let hitungan = 0; // Variable private
    
    function tambah() {
        hitungan = hitungan + 1;
        console.log("Hitungan sekarang: " + hitungan);
    }
    
    return tambah;
}

const counter1 = buatCounter();
const counter2 = buatCounter();

counter1(); // Counter 1 bertambah
counter1(); // Counter 1 bertambah lagi
counter2(); // Counter 2 bertambah (terpisah dari counter1)
```

### ðŸ’¡ Penjelasan:
1. **`hitungan`** tidak bisa diakses langsung dari luar
2. **`tambah()`** adalah closure yang bisa mengakses dan mengubah `hitungan`
3. **Setiap counter independen** â†’ `counter1` dan `counter2` punya hitungan sendiri
4. **Data `hitungan` terlindungi** â†’ Hanya bisa diubah lewat function `tambah()`

### ðŸ“¤ Output:
```
Hitungan sekarang: 1
Hitungan sekarang: 2
Hitungan sekarang: 1
```

---

## ðŸ“ Contoh 4: Diskon Toko

### Kode:
```javascript
function buatDiskon(persenDiskon) {
    function hitungHarga(hargaAsli) {
        const diskon = hargaAsli * (persenDiskon / 100);
        const hargaAkhir = hargaAsli - diskon;
        return hargaAkhir;
    }
    
    return hitungHarga;
}

const diskonMember = buatDiskon(20);  // Diskon 20%
const diskonVIP = buatDiskon(50);     // Diskon 50%

console.log("Harga dengan diskon Member: Rp" + diskonMember(100000));
console.log("Harga dengan diskon VIP: Rp" + diskonVIP(100000));
```

### ðŸ’¡ Penjelasan:
1. **`buatDiskon(20)`** â†’ Membuat closure yang "mengingat" diskon 20%
2. **`diskonMember(100000)`** â†’ Menghitung: 100000 - (20% Ã— 100000) = 80000
3. **`diskonVIP(50)`** â†’ Membuat closure berbeda dengan diskon 50%
4. **Setiap closure punya persentase diskon sendiri**

### ðŸ“¤ Output:
```
Harga dengan diskon Member: Rp80000
Harga dengan diskon VIP: Rp50000
```

---

## ðŸ“ Contoh 5: Kalkulator Sederhana

### Kode:
```javascript
function buatKalkulator(angkaPertama) {
    function kali(angkaKedua) {
        return angkaPertama * angkaKedua;
    }
    
    return kali;
}

const kaliDua = buatKalkulator(2);
const kaliTiga = buatKalkulator(3);

console.log(kaliDua(5));   // 2 Ã— 5
console.log(kaliDua(10));  // 2 Ã— 10
console.log(kaliTiga(5));  // 3 Ã— 5
```

### ðŸ’¡ Penjelasan:
1. **`buatKalkulator(2)`** â†’ Closure yang selalu mengalikan dengan 2
2. **`kaliDua(5)`** â†’ Menghitung 2 Ã— 5 = 10
3. **Nilai pertama "tersimpan"** dalam closure
4. **Kita tinggal berikan nilai kedua** saat memanggil function

### ðŸ“¤ Output:
```
10
20
15
```

---

## ðŸŽ“ Kesimpulan

### âœ¨ Closure adalah:
- ðŸ”— Function yang "terhubung" dengan data di tempat ia dibuat
- ðŸ’¾ Function yang bisa "mengingat" variable dari outer scope
- ðŸ” Cara membuat data yang private dan terlindungi

### ðŸš€ Kegunaan Closure:
- âœ… Membuat function dengan konfigurasi khusus
- âœ… Menyimpan state/kondisi dalam function
- âœ… Membuat data yang private
- âœ… Membuat function factory (pembuat function)

### ðŸ“Œ Ingat:
> **Setiap kali kita memanggil outer function, akan terbentuk closure BARU dengan "ingatan" yang terpisah!**

---

## ðŸ’ª Tips Belajar:

1. **Mulai dari contoh sederhana** â†’ Pahami dulu konsep dasar
2. **Coba modifikasi kode** â†’ Ganti nilai, lihat hasilnya
3. **Buat contoh sendiri** â†’ Praktek adalah kunci!
4. **Jangan terburu-buru** â†’ Closure butuh waktu untuk dipahami

---

**Selamat belajar! ðŸŽ‰**
