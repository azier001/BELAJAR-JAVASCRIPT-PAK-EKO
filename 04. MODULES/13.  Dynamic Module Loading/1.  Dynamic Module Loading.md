# 🚀 Dynamic Module Loading

## 📝 Penjelasan

> **Dynamic Module Loading** adalah teknik untuk memuat modul JavaScript secara dinamis saat dibutuhkan, bukan memuat semuanya di awal.

### 🎯 Konsep Dasar

- Saat kita menggunakan module dengan cara `import`, maka semua module akan di load
- Pada kenyataannya, kadang kita tidak ingin meload semua module diawal, kita ingin meload module ketika dibutuhkan saja, ini akan menghemat bandwith jaringan juga, karena kita tidak perlu download semua module diawal
- JavaScript mendukung dynamic module loading, caranya kita bisa menggunakan function `import()`, dimana hasilnya berupa `Promise<ModuleObject>` (Promise adalah materi yang kompleks, ini akan dibahas di kelas JavaScript Async)

---

## 💡 Keuntungan Dynamic Module Loading

- ⚡ **Performance**: Mengurangi waktu loading awal aplikasi
- 📦 **Bandwidth**: Menghemat penggunaan data dengan hanya memuat yang diperlukan
- 🎯 **On-Demand**: Memuat modul hanya saat benar-benar dibutuhkan
- 🔄 **Lazy Loading**: Implementasi lazy loading menjadi lebih mudah

---

## 📚 Contoh Implementasi

### 1️⃣ Static Import (Tradisional)

```javascript
// math.js
export function add(a, b) {
  return a + b;
}

export function subtract(a, b) {
  return a - b;
}

export function multiply(a, b) {
  return a * b;
}
```

```javascript
// app.js - Static Import
import { add, subtract, multiply } from './math.js';

console.log(add(5, 3));
console.log(subtract(10, 4));
console.log(multiply(3, 7));
```

**Output:**
```
8
6
21
```

> ⚠️ **Masalah**: Semua fungsi (add, subtract, multiply) dimuat sekaligus meskipun mungkin hanya butuh satu fungsi.

---

### 2️⃣ Dynamic Import (Modern)

```javascript
// app.js - Dynamic Import
async function calculate() {
  // Module dimuat hanya saat fungsi ini dipanggil
  const math = await import('./math.js');
  
  console.log(math.add(5, 3));
  console.log(math.subtract(10, 4));
}

// Modul math.js belum dimuat sampai fungsi calculate() dipanggil
console.log('App started');

// Sekarang baru dimuat
calculate();
```

**Output:**
```
App started
8
6
```

> ✅ **Keuntungan**: Module `math.js` hanya dimuat ketika fungsi `calculate()` dipanggil.

---

### 3️⃣ Dynamic Import dengan Kondisi

```javascript
// app.js - Conditional Loading
const button = document.getElementById('loadChart');

button.addEventListener('click', async () => {
  // Chart library hanya dimuat saat tombol diklik
  const chartModule = await import('./chart.js');
  chartModule.renderChart();
});
```

**Penjelasan:**
- Module `chart.js` tidak dimuat saat halaman pertama kali dibuka
- Module baru dimuat ketika user mengklik tombol
- Menghemat bandwidth untuk user yang tidak mengklik tombol tersebut

---

### 4️⃣ Dynamic Import dengan Error Handling

```javascript
// app.js - With Error Handling
async function loadModule() {
  try {
    const module = await import('./myModule.js');
    module.doSomething();
  } catch (error) {
    console.error('Gagal memuat module:', error);
  }
}

loadModule();
```

**Output (jika berhasil):**
```
Module loaded successfully
```

**Output (jika gagal):**
```
Gagal memuat module: Error: Module not found
```

---

### 5️⃣ Dynamic Import dengan Destructuring

```javascript
// utils.js
export function formatDate(date) {
  return date.toLocaleDateString();
}

export function formatCurrency(amount) {
  return `Rp ${amount.toLocaleString()}`;
}
```

```javascript
// app.js - Destructuring
async function displayData() {
  // Destructuring langsung dari dynamic import
  const { formatDate, formatCurrency } = await import('./utils.js');
  
  console.log(formatDate(new Date()));
  console.log(formatCurrency(150000));
}

displayData();
```

**Output:**
```
10/28/2025
Rp 150,000
```

---

## 🎓 Best Practices

### ✅ **DO (Lakukan)**

- Gunakan dynamic import untuk modul besar yang tidak selalu dibutuhkan
- Gunakan untuk fitur-fitur optional atau kondisional
- Implementasikan error handling dengan try-catch
- Gunakan untuk code splitting dalam aplikasi besar

### ❌ **DON'T (Hindari)**

- Jangan gunakan untuk modul kecil yang selalu dibutuhkan
- Jangan overuse dynamic import untuk setiap modul
- Jangan lupa menangani loading state di UI
- Jangan abaikan error handling

---

## 📊 Perbandingan Static vs Dynamic Import

| Aspek | Static Import | Dynamic Import |
|-------|---------------|----------------|
| **Syntax** | `import { x } from 'module'` | `await import('module')` |
| **Load Time** | Saat parsing | Saat runtime |
| **Return Type** | Direct binding | Promise |
| **Code Splitting** | ❌ Tidak | ✅ Ya |
| **Conditional Loading** | ❌ Tidak | ✅ Ya |
| **Top Level** | ✅ Wajib | ❌ Tidak wajib |

---

## 🔗 Rangkuman

Dynamic Module Loading adalah fitur powerful dalam JavaScript modern yang memungkinkan kita untuk:

- 🎯 Memuat modul secara on-demand
- ⚡ Meningkatkan performa aplikasi
- 📦 Mengoptimalkan penggunaan bandwidth
- 🔄 Implementasi lazy loading dengan mudah

> 💡 **Tip**: Gunakan dynamic import untuk modul yang tidak diperlukan saat initial load, seperti libraries besar, komponen admin, atau fitur premium.
